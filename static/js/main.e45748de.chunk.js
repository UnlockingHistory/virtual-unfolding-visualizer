(this["webpackJsonpvirtual-unfolding-visualizer"]=this["webpackJsonpvirtual-unfolding-visualizer"]||[]).push([[0],Array(133).concat([function(e,t,a){e.exports=a(242)},,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){var n={"./DB-1538_58x58x58_GX.tom":164,"./DB-1538_58x58x58_GXX.tom":165,"./DB-1538_58x58x58_GXX_3X.tom":166,"./DB-1538_58x58x58_GXY.tom":167,"./DB-1538_58x58x58_GXY_3X.tom":168,"./DB-1538_58x58x58_GXZ.tom":169,"./DB-1538_58x58x58_GXZ_3X.tom":170,"./DB-1538_58x58x58_GX_3X.tom":171,"./DB-1538_58x58x58_GY.tom":172,"./DB-1538_58x58x58_GYY.tom":173,"./DB-1538_58x58x58_GYY_3X.tom":174,"./DB-1538_58x58x58_GYZ.tom":175,"./DB-1538_58x58x58_GYZ_3X.tom":176,"./DB-1538_58x58x58_GY_3X.tom":177,"./DB-1538_58x58x58_GZ.tom":178,"./DB-1538_58x58x58_GZZ.tom":179,"./DB-1538_58x58x58_GZZ_3X.tom":180,"./DB-1538_58x58x58_GZ_3X.tom":181,"./DB-1538_58x58x58_allIndices.tom":182,"./DB-1538_58x58x58_allNormalsList.bin":183,"./DB-1538_58x58x58_allPoints.tom":184,"./DB-1538_58x58x58_allPointsList.bin":185,"./DB-1538_58x58x58_allWidthsMax.tom":186,"./DB-1538_58x58x58_allWidthsMin.tom":187,"./DB-1538_58x58x58_blurred.tom":188,"./DB-1538_58x58x58_clipped.tom":189,"./DB-1538_58x58x58_indices.tom":190,"./DB-1538_58x58x58_indices_FLAGGED.tom":191,"./DB-1538_58x58x58_meshNeighborsList.bin":192,"./DB-1538_58x58x58_meshNumbersList.bin":193,"./DB-1538_58x58x58_normals.tom":194,"./DB-1538_58x58x58_normalsList.bin":195,"./DB-1538_58x58x58_normalsList_FLAGGED.bin":196,"./DB-1538_58x58x58_normalsRelaxed.tom":197,"./DB-1538_58x58x58_points3DList.bin":198,"./DB-1538_58x58x58_points3DList_FLAGGED.bin":199,"./DB-1538_58x58x58_raw.tom":200,"./DB-1538_58x58x58_responses.tom":201,"./DB-1538_58x58x58_responsesRelaxed.tom":202,"./DB-1538_58x58x58_widthsMaxList.bin":203,"./DB-1538_58x58x58_widthsMaxList_FLAGGED.bin":204,"./DB-1538_58x58x58_widthsMinList.bin":205,"./DB-1538_58x58x58_widthsMinList_FLAGGED.bin":206};function i(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=r,e.exports=i,i.id=163},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_GX.c9275395.tom"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_GXX.d14a19bb.tom"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_GXX_3X.a183c4f7.tom"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_GXY.75ebb749.tom"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_GXY_3X.7a0eae41.tom"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_GXZ.897750f0.tom"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_GXZ_3X.890f2b9d.tom"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_GX_3X.5c3a19d4.tom"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_GY.642eccff.tom"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_GYY.17e54997.tom"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_GYY_3X.1af9eef5.tom"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_GYZ.d1f3a413.tom"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_GYZ_3X.d7b4f93b.tom"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_GY_3X.9eb54991.tom"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_GZ.f09797de.tom"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_GZZ.9363dbbd.tom"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_GZZ_3X.013071da.tom"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_GZ_3X.b47ec805.tom"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_allIndices.050de0bc.tom"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_allNormalsList.e3e81c3b.bin"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_allPoints.2b912915.tom"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_allPointsList.c9c90b9d.bin"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_allWidthsMax.61f5e770.tom"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_allWidthsMin.3b49f9f2.tom"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_blurred.5faab082.tom"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_clipped.7e1852e1.tom"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_indices.b103d0a4.tom"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_indices_FLAGGED.71633992.tom"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_meshNeighborsList.0755bafa.bin"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_meshNumbersList.4aea1657.bin"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_normals.bea746a9.tom"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_normalsList.ca3d83ec.bin"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_normalsList_FLAGGED.608a3375.bin"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_normalsRelaxed.462cefc8.tom"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_points3DList.7d9376d3.bin"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_points3DList_FLAGGED.7fc46db0.bin"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_raw.32064204.tom"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_responses.db6ae242.tom"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_responsesRelaxed.a8b69ac5.tom"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_widthsMaxList.cb2853bf.bin"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_widthsMaxList_FLAGGED.b91d4983.bin"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_widthsMinList.f3b53210.bin"},function(e,t,a){e.exports=a.p+"static/media/DB-1538_58x58x58_widthsMinList_FLAGGED.ef2d5919.bin"},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n,i=a(0),r=a.n(i),o=a(25),c=a.n(o),l=(a(137),a(138),a(16)),s=a(245),u=a(41),m=(a(139),a(8)),f=Object(m.atom)({key:"currentTab",default:"3D"}),d=Object(m.atom)({key:"visibleScalarTomFilename",default:null}),p=Object(m.atom)({key:"visibleVectorTomFilenames",default:[]}),h=Object(m.atom)({key:"visibleBinFilenames",default:[]}),b=a(14),x=a.n(b),_=a(17);!function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"}(n||(n={}));var v=Object(m.atom)({key:"selectionBounds",default:{min:[0,0,0],max:[0,0,0]}}),y=Object(m.selector)({key:"selectionSize",get:function(e){var t=(0,e.get)(v);return[t.max[0]-t.min[0],t.max[1]-t.min[1],t.max[2]-t.min[2]]}}),E=Object(m.selector)({key:"selectionCenter",get:function(e){var t=(0,e.get)(y);return[t[0]/2,t[1]/2,t[2]/2]}}),g=Object(m.atom)({key:"sectionPosition",default:0}),D=Object(m.atom)({key:"sectionAxis",default:n.Z}),O=(Object(m.atom)({key:"currentVisibleSection",default:"raw"}),Object(m.selector)({key:"sectionSize",get:function(e){var t=e.get,a=t(y),n=t(D),i=a.slice();return i[n]=1,i}})),j=Object(m.selector)({key:"sectionCenter",get:function(e){var t=e.get,a=t(E),n=t(D),i=t(g),r=a.slice();return r[n]=i,r}});function F(e){return Number.isInteger(e)}function w(e){return F(e)&&e>0}function B(e){return F(e)&&e>=0}function k(e){return"[ ".concat(e.x,", ").concat(e.y,", ").concat(e.z," ]")}function S(e){var t=e.split(".");if(t.length<2)throw new Error("Invalid filename: ".concat(e,", or no extension present."));return t[t.length-1]}var L={},N=function(e){return"tom"===S(e)},G=function(e){return"bin"===S(e)},C=function(e){return L[e].isScalarType()},V=function(e){return L[e].isVectorType()},M=function(e){return L[e].isVector1Type()},A=function(e){return L[e].isVector3Type()};var X=Object(m.atom)({key:"filenames",default:[]}),R=Object(m.selector)({key:"tomFilenames",get:function(e){return(0,e.get)(X).filter(N)}}),U=Object(m.selector)({key:"binFilenames",get:function(e){return(0,e.get)(X).filter(G)}}),Z=(Object(m.selector)({key:"vector3BinFilenames",get:function(e){return(0,e.get)(U).filter(A)}}),Object(m.selector)({key:"scalarTomFilenames",get:function(e){return(0,e.get)(R).filter(C)}})),T=Object(m.selector)({key:"vectorTomFilenames",get:function(e){return(0,e.get)(R).filter(V)}}),Y=Object(m.selector)({key:"vector3TomFilenames",get:function(e){return(0,e.get)(R).filter(A)}}),P=Object(m.selector)({key:"vector1TomFilenames",get:function(e){return(0,e.get)(R).filter(M)}}),z=(Object(m.atom)({key:"dimensions",default:[0,0,0]}),a(10)),I="NumEl".length+1,H=330+I,W="Null".length+1;function J(e){return K.apply(this,arguments)}function K(){return(K=Object(_.a)(x.a.mark((function e(t){var a,n,i,r,o,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne(t);case 2:return a=e.sent,e.next=5,re(t,a,512);case 5:return n=e.sent,e.next=8,Promise.all([$(t),Q(t)]);case 8:if(i=e.sent,r=Object(l.a)(i,2),o=r[0],c=r[1],n.length===o.x*o.y*o.z*c){e.next=14;break}throw new Error("Error reading ".concat(t.name,". Expected tom dimensions ").concat(k(o)," not compatible with data of length ").concat(n.length,"."));case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e){return q.apply(this,arguments)}function q(){return(q=Object(_.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re(t,"uint16",0,6);case 2:if(a=e.sent,w((n=new z.Vector3(a[0],a[1],a[2])).x)&&w(n.y)&&w(n.z)){e.next=6;break}throw new Error("Error reading ".concat(t.name,". Tom dimensions must be positive integers: ").concat(k(n)));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e){return ee.apply(this,arguments)}function ee(){return(ee=Object(_.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce(t,330,"NumEl".length);case 2:if("NumEl"===e.sent){e.next=5;break}return e.abrupt("return",1);case 5:return e.next=7,re(t,"uint8",330+"NumEl".length,I-"NumEl".length);case 7:if(a=e.sent,w(n=a[0])){e.next=11;break}throw new Error("Error reading ".concat(t.name,". Invalid num elements: ").concat(n,"."));case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){return ae.apply(this,arguments)}function ae(){return(ae=Object(_.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce(t,H,"Null".length);case 2:if("Null"===e.sent){e.next=5;break}return e.abrupt("return",!1);case 5:return e.next=7,re(t,"uint8",H+"Null".length,W-"Null".length);case 7:if(a=e.sent,B(n=a[0])&&!(n>1)){e.next=11;break}throw new Error("Error reading ".concat(t.name,". Invalid use null flag: ").concat(n,"."));case 11:return e.abrupt("return",n>0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e){return ie.apply(this,arguments)}function ie(){return(ie=Object(_.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce(t,320,10);case 2:a=e.sent.replace(/\0/g,""),e.t0=a,e.next="float32"===e.t0?6:"uint32"===e.t0?7:"int32"===e.t0?8:(e.t0,9);break;case 6:return e.abrupt("return","float32");case 7:return e.abrupt("return","uint32");case 8:return e.abrupt("return","int32");case 9:return e.abrupt("return","uint8");case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e,t,a,n){return oe.apply(this,arguments)}function oe(){return(oe=Object(_.a)(x.a.mark((function e(t,a,n,i){var r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(t,n,i);case 2:r=e.sent,e.t0=a,e.next="uint8"===e.t0?6:"uint16"===e.t0?7:"uint32"===e.t0?8:"int32"===e.t0?9:"float32"===e.t0?10:11;break;case 6:return e.abrupt("return",new Uint8Array(r));case 7:return e.abrupt("return",new Uint16Array(r));case 8:return e.abrupt("return",new Uint32Array(r));case 9:return e.abrupt("return",new Int32Array(r));case 10:return e.abrupt("return",new Float32Array(r));case 11:throw new Error("Error reading ".concat(t.name,". Unsupported type: ").concat(a,"."));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(e,t,a){return le.apply(this,arguments)}function le(){return(le=Object(_.a)(x.a.mark((function e(t,a,n){var i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new FileReader,e.abrupt("return",new Promise((function(e,r){i.onerror=function(){i.abort(),r(new DOMException("Problem parsing file: ".concat(t.name)))},i.onload=function(){e(i.result)};var o=t.slice(a,void 0!==n?a+n:void 0);i.readAsText(o)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e,t,a){return ue.apply(this,arguments)}function ue(){return(ue=Object(_.a)(x.a.mark((function e(t,a,n){var i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new FileReader,e.abrupt("return",new Promise((function(e,r){i.onerror=function(){i.abort(),r(new DOMException("Problem parsing file: ".concat(t.name)))},i.onload=function(){e(i.result)};var o=t.slice(a,void 0!==n?a+n:void 0);i.readAsArrayBuffer(o)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var me=a(9),fe=a(7),de=a(1),pe=a(6),he=a(4),be=a(5),xe=a(81),_e=a.n(xe);function ve(e){return ye.apply(this,arguments)}function ye(){return(ye=Object(_.a)(x.a.mark((function e(t){var a,n,i,r,o,c,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([J(t),$(t),Q(t),ne(t),te(t)]);case 2:if(a=e.sent,n=Object(l.a)(a,5),i=n[0],r=n[1],o=n[2],c=n[3],s=n[4],1!==o||!1!==s){e.next=11;break}return e.abrupt("return",new ge(t,i,r,s,c));case 11:return e.abrupt("return",new De(t,i,r,s,c,o));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ee=function(e){Object(he.a)(a,e);var t=Object(be.a)(a);function a(e,i,r,o,c,l){var s;Object(de.a)(this,a),(s=t.call(this,e,i,r.x*r.y*r.z,o,c,l)).layer=void 0,s.layerNeedsUpdate=!0,s.layerNum=-1,s.axis=n.Z,s.dimensions=void 0,s.dimensions=r;var u=s.calcLayerLength();return s.layer=i.slice(0,u),s}return Object(pe.a)(a,[{key:"calcLayerLength",value:function(){return this.numElements*this.dimensions.x*this.dimensions.y*this.dimensions.z/this.dimensions.toArray()[this.axis]}},{key:"setAxis",value:function(e){this.axis!==e&&(this.layerNeedsUpdate=!0,this.colorsNeedsUpdate=!0,this.axis=e)}},{key:"setLayerNum",value:function(e){this.layerNum!==e&&(this.layerNeedsUpdate=!0,this.colorsNeedsUpdate=!0,this.layerNum=e)}},{key:"getLayerData",value:function(e,t){if(this.setAxis(e),this.setLayerNum(t),!this.layerNeedsUpdate)return this.layer;for(var a=this.layer.length,n=0;n<a;n++)this.layer[n]=this.data[n+t*a];return this.layer}}]),a}(function(){function e(t,a,n,i,r,o){Object(de.a)(this,e),this.data=void 0,this.atom=void 0,this.nullVal=null,this.geometryNeedsUpdate=!0,this.colorsNeedsUpdate=!0,this.__visualStyle=void 0,this.__pointDataFilename=void 0,this.__vectorDataFilename=void 0,this.__vectorOffsetFilename=void 0,this.__vectorScaleFilename=void 0,this.__colorMode="hex",this.__colorZeroCentered=!1,this.__colorHex=void 0,this.__colorDataFilename=void 0,this.positions=void 0,this.count=0,this.vertexColors=void 0,this.numElements=void 0,this.length=void 0,this.min=void 0,this.max=void 0,this.type=void 0,this.filename=void 0,this.filename=t,this.data=a,this.length=n,this.numElements=i,this.nullVal=r?function(e){switch(e){case"uint8":return 255;case"int32":case"float32":return-1e4;default:throw new Error("No null supported for type ".concat(e,"."))}}(o):null,this.type=o;for(var c=-1/0,l=1/0,s=0,u=a.length;s<u;s++){var m=a[s];null!==this.nullVal&&m===this.nullVal||(c=Math.max(c,m),l=Math.min(l,m))}l===1/0&&(l=0,c=0),this.min=l,this.max=c,"uint8"===o&&(this.min=0,this.max=255)}return Object(pe.a)(e,[{key:"getAtom",value:function(){return this.atom}},{key:"getData",value:function(){return this.data}},{key:"setPointDataFilename",value:function(e){this.__pointDataFilename!==e&&(this.__pointDataFilename=e,this.geometryNeedsUpdate=!0)}},{key:"setVectorDataFilename",value:function(e){this.__vectorDataFilename!==e&&(this.__vectorDataFilename=e,this.geometryNeedsUpdate=!0)}},{key:"setVectorOffsetFilename",value:function(e){this.__vectorOffsetFilename!==e&&(this.__vectorOffsetFilename=e,this.geometryNeedsUpdate=!0)}},{key:"setVectorScaleFilename",value:function(e){this.__vectorScaleFilename!==e&&(this.__vectorScaleFilename=e,this.geometryNeedsUpdate=!0)}},{key:"setColorMode",value:function(e){this.__colorMode!==e&&(this.__colorMode=e,this.colorsNeedsUpdate=!0)}},{key:"setColorZeroCentered",value:function(e){this.__colorZeroCentered!==e&&(this.__colorZeroCentered=e,this.colorsNeedsUpdate=!0)}},{key:"setColorHex",value:function(e){this.__colorHex!==e&&(this.__colorHex=e,this.colorsNeedsUpdate=!0)}},{key:"setColorDataFilename",value:function(e){this.__colorDataFilename!==e&&(this.__colorDataFilename=e,this.colorsNeedsUpdate=!0)}},{key:"isScalarType",value:function(){return 1===this.numElements&&null===this.nullVal}},{key:"isVectorType",value:function(){return this.numElements>1||null!==this.nullVal}},{key:"isVector3Type",value:function(){return 3===this.numElements}},{key:"isVector1Type",value:function(){return 1===this.numElements}},{key:"dispose",value:function(){}}]),e}()),ge=function(e){Object(he.a)(a,e);var t=Object(be.a)(a);function a(e,n,i,r,o){var c;Object(de.a)(this,a),(c=t.call(this,e.name,n,i,1,r,o)).rgbTexture=void 0;var l=c.calcLayerLength();return c.rgbTexture=new Uint8Array(3*l),c}return Object(pe.a)(a,[{key:"updateAtomDefaultsAfterDataLoaded",value:function(){var e=this.filename;this.__visualStyle="scalarField",this.__colorMode=this.layer.constructor===Uint8Array?"greyscale":"spectral",this.__colorZeroCentered=!1,this.atom=Object(m.atom)({key:"".concat(e,"_atom"),default:{filename:e,visualStyle:this.__visualStyle,colorMode:this.__colorMode,colorZeroCentered:this.__colorZeroCentered}})}},{key:"getLayerTexture",value:function(e,t,a){var n=this.getLayerData(e,t),i=a.colorMode,r=a.colorZeroCentered;if(this.setColorMode(i),this.setColorZeroCentered(r),!this.colorsNeedsUpdate)return this.rgbTexture;var o=n.length,c=this.min,l=this.max;if(r){var s=Math.max(Math.abs(l),Math.abs(c));c=-s,l=s}for(var u=l-c,m=new z.Color,f=0;f<o;f++){var d=n[f];if(null!==this.nullVal&&d===this.nullVal)this.rgbTexture[3*f]=0,this.rgbTexture[3*f+1]=0,this.rgbTexture[3*f+2]=0;else if("spectral"===i){var p=.7*(1-d/u);m.setHSL(p,1,.5),this.rgbTexture[3*f]=Math.round(255*m.r),this.rgbTexture[3*f+1]=Math.round(255*m.g),this.rgbTexture[3*f+2]=Math.round(255*m.b)}else{var h=Math.round((d-c)/u*255);this.rgbTexture[3*f]=h,this.rgbTexture[3*f+1]=h,this.rgbTexture[3*f+2]=h}}return this.colorsNeedsUpdate=!1,this.rgbTexture}}]),a}(Ee),De=function(e){Object(he.a)(a,e);var t=Object(be.a)(a);function a(e,n,i,r,o,c){var l;return Object(de.a)(this,a),(l=t.call(this,e.name,n,i,c,r,o)).positions=void 0,l.vertexColors=void 0,l}return Object(pe.a)(a,[{key:"updateAtomDefaultsAfterDataLoaded",value:function(){var e=this.filename.toLowerCase(),t=Object.keys(L).filter(N).filter(A);this.__colorMode="hex",this.__colorHex=_e()(),this.__colorZeroCentered=!1,e.includes("normal")?(this.__visualStyle="vector",this.__vectorDataFilename=this.filename):e.includes("point")?(this.__visualStyle="point",this.__pointDataFilename=this.filename):e.includes("indices")?(this.__visualStyle="point",this.__pointDataFilename=t.find((function(e){return e.toLowerCase().includes("point")})),this.__colorMode="spectral",this.__colorDataFilename=this.filename):e.includes("width")?(this.__visualStyle="vector",this.__vectorScaleFilename=this.filename,this.__vectorDataFilename=t.find((function(e){return e.toLowerCase().includes("normalsrelaxed")}))||t.find((function(e){return e.toLowerCase().includes("normals")})),this.__vectorOffsetFilename=t.find((function(e){return e.toLowerCase().includes("point")}))):this.__visualStyle="point",this.atom=Object(m.atom)({key:"".concat(e,"_atom"),default:{filename:e,visualStyle:this.__visualStyle,pointDataFilename:this.__pointDataFilename,vectorDataFilename:this.__vectorDataFilename,vectorOffsetFilename:this.__vectorOffsetFilename,vectorScaleFilename:this.__vectorScaleFilename,colorMode:this.__colorMode,colorHex:this.__colorHex,colorZeroCentered:this.__colorZeroCentered,colorDataFilename:this.__colorDataFilename}}),this.positions=new Float32Array(this.positionsDataLengthForVisualStyle(this.__visualStyle)),this.vertexColors=new Float32Array(this.positions.length)}},{key:"positionsDataLengthForVisualStyle",value:function(e){var t=this.calcLayerLength();return"vector"===e?3*t*2:3*t}},{key:"setVisualStyle",value:function(e){this.__visualStyle!==e&&(this.__visualStyle=e,this.positions=new Float32Array(this.positionsDataLengthForVisualStyle(this.__visualStyle)),this.geometryNeedsUpdate=!0,this.colorsNeedsUpdate=!0)}},{key:"setAxis",value:function(e){Object(me.a)(Object(fe.a)(a.prototype),"setAxis",this).call(this,e),this.geometryNeedsUpdate=!0}},{key:"setLayerNum",value:function(e){Object(me.a)(Object(fe.a)(a.prototype),"setLayerNum",this).call(this,e),this.geometryNeedsUpdate=!0}},{key:"getLayerPositions",value:function(e,t,a){var i=this.getLayerData(e,t);this.setAxis(e),this.setLayerNum(t);var r=a.visualStyle,o=a.pointDataFilename,c=a.vectorDataFilename,l=a.vectorOffsetFilename,s=a.vectorScaleFilename,u=a.colorMode,m=a.colorHex,f=a.colorZeroCentered,d=a.colorDataFilename;if(this.setVisualStyle(r),this.setPointDataFilename(o),this.setVectorDataFilename(c),this.setVectorOffsetFilename(l),this.setColorMode(u),this.setColorHex(m),this.setColorZeroCentered(f),this.setColorDataFilename(d),!this.colorsNeedsUpdate&&!this.geometryNeedsUpdate)return{positions:this.positions,count:this.count,vertexColors:this.vertexColors};var p={};if(o&&(p.pointData=L[o].getLayerData(e,t)),c&&(p.vectorData=L[c].getLayerData(e,t)),l&&(p.vectorOffset=L[l].getLayerData(e,t)),s&&(p.vectorScale=L[s].getLayerData(e,t)),d&&(p.colorDataSelection=L[d],p.colorDataSelection&&(p.colorData=p.colorDataSelection.getLayerData(e,t))),this.colorsNeedsUpdate){for(var h=e===n.X?1:this.dimensions.x,b=e===n.Y?1:this.dimensions.y,x=e===n.Z?1:this.dimensions.z,_=0,v=0;v<x;v++)for(var y=0;y<b;y++)for(var E=0;E<h;E++){var g=v*h*b+y*h+E;if(i[this.numElements*g]!==this.nullVal){var D=new z.Color;if("hex"===u&&m){var O=parseInt(m.substr(1),16);isNaN(O)||D.setHex(O)}else if(p.colorData&&p.colorDataSelection){var j=p.colorDataSelection,F=j.min,w=j.max;if(f){var B=Math.max(Math.abs(w),Math.abs(F));F=-B,w=B}var k=(p.colorData[g]-F)/(w-F);"greyscale"===u?D.setRGB(k,k,k):"spectral"===u&&D.setHSL(.7*k,1,.5)}if(this.vertexColors[3*_]=D.r,this.vertexColors[3*_+1]=D.g,this.vertexColors[3*_+2]=D.b,"point"===r)if(p.pointData){if(p.pointData[3*g]===this.nullVal)continue;_++}else _++;else if("vector"===r){if(!p.vectorData)continue;if(p.vectorOffset){if(p.vectorOffset[3*g]===this.nullVal)continue;_++}else _++;this.vertexColors[3*_]=this.vertexColors[3*(_-1)],this.vertexColors[3*_+1]=this.vertexColors[3*(_-1)+1],this.vertexColors[3*_+2]=this.vertexColors[3*(_-1)+2],_++}}}this.colorsNeedsUpdate=!1}if(this.geometryNeedsUpdate){for(var S=e===n.X?1:this.dimensions.x,N=e===n.Y?1:this.dimensions.y,G=e===n.Z?1:this.dimensions.z,C=0,V=0;V<G;V++)for(var M=0;M<N;M++)for(var A=0;A<S;A++){var X=V*S*N+M*S+A;if(i[this.numElements*X]!==this.nullVal)if("point"===r)if(p.pointData){if(p.pointData[3*X]===this.nullVal)continue;this.positions[3*C]=p.pointData[3*X],this.positions[3*C+1]=p.pointData[3*X+1],this.positions[3*C+2]=p.pointData[3*X+2],C++}else this.positions[3*C]=A+.5,this.positions[3*C+1]=M+.5,this.positions[3*C+2]=t+.5,C++;else if("vector"===r){if(!p.vectorData)continue;if(p.vectorOffset){if(p.vectorOffset[3*X]===this.nullVal)continue;this.positions[3*C]=p.vectorOffset[3*X],this.positions[3*C+1]=p.vectorOffset[3*X+1],this.positions[3*C+2]=p.vectorOffset[3*X+2],C++}else this.positions[3*C]=A+.5,this.positions[3*C+1]=M+.5,this.positions[3*C+2]=t+.5,C++;if(p.vectorData[3*X]===this.nullVal)continue;var R=p.vectorScale?p.vectorScale[X]:1;this.positions[3*C]=this.positions[3*(C-1)]+R*p.vectorData[3*X],this.positions[3*C+1]=this.positions[3*(C-1)+1]+R*p.vectorData[3*X+1],this.positions[3*C+2]=this.positions[3*(C-1)+2]+R*p.vectorData[3*X+2],C++}}this.count=C,this.geometryNeedsUpdate=!1}return{positions:this.positions,count:this.count,vertexColors:this.vertexColors}}}]),a}(Ee),Oe="DB-1538_58x58x58",je=["".concat(Oe,"_raw.tom"),"".concat(Oe,"_clipped.tom"),"".concat(Oe,"_GX.tom"),"".concat(Oe,"_GX_3X.tom"),"".concat(Oe,"_GY.tom"),"".concat(Oe,"_GY_3X.tom"),"".concat(Oe,"_GZ.tom"),"".concat(Oe,"_GZ_3X.tom"),"".concat(Oe,"_GXX.tom"),"".concat(Oe,"_GXX_3X.tom"),"".concat(Oe,"_GYY.tom"),"".concat(Oe,"_GYY_3X.tom"),"".concat(Oe,"_GZZ.tom"),"".concat(Oe,"_GZZ_3X.tom"),"".concat(Oe,"_GXY.tom"),"".concat(Oe,"_GXY_3X.tom"),"".concat(Oe,"_GYZ.tom"),"".concat(Oe,"_GYZ_3X.tom"),"".concat(Oe,"_GXZ.tom"),"".concat(Oe,"_GXZ_3X.tom"),"".concat(Oe,"_normals.tom"),"".concat(Oe,"_responses.tom"),"".concat(Oe,"_normalsRelaxed.tom"),"".concat(Oe,"_responsesRelaxed.tom"),"".concat(Oe,"_blurred.tom"),"".concat(Oe,"_allPoints.tom"),"".concat(Oe,"_allWidthsMax.tom"),"".concat(Oe,"_allWidthsMin.tom"),"".concat(Oe,"_allIndices.tom"),"".concat(Oe,"_allPointsList.bin"),"".concat(Oe,"_allNormalsList.bin"),"".concat(Oe,"_indices.tom"),"".concat(Oe,"_points3DList.bin"),"".concat(Oe,"_normalsList.bin"),"".concat(Oe,"_widthsMinList.bin"),"".concat(Oe,"_widthsMaxList.bin"),"".concat(Oe,"_indices_FLAGGED.tom"),"".concat(Oe,"_points3DList_FLAGGED.bin"),"".concat(Oe,"_normalsList_FLAGGED.bin"),"".concat(Oe,"_widthsMinList_FLAGGED.bin"),"".concat(Oe,"_widthsMaxList_FLAGGED.bin"),"".concat(Oe,"_meshNeighborsList.bin"),"".concat(Oe,"_meshNumbersList.bin")],Fe=je.map((function(e){return a(163)("./".concat(e))}));function we(){return Be.apply(this,arguments)}function Be(){return(Be=Object(_.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Fe.map((function(e){return fetch(e).then((function(e){return e.blob()}))})));case 2:return(t=e.sent).forEach((function(e,t){e.name=je[t]})),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}we();var ke=!1;function Se(){var e=Object(m.useSetRecoilState)(v),t=Object(m.useSetRecoilState)(g),a=Object(m.useRecoilValue)(D),n=Object(m.useSetRecoilState)(X);function o(e){return c.apply(this,arguments)}function c(){return(c=Object(_.a)(x.a.mark((function i(r){var o,c,l;return x.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return Object.keys(L).forEach((function(e){L[e].dispose(),delete L[e]})),o=r.filter((function(e){return"tom"===S(e.name)})),i.next=4,Promise.all(o.map((function(e){return ve(e)})));case 4:return c=i.sent,o.forEach((function(e,t){L[e.name]=c[t]})),Object.values(c).forEach((function(e){return e.updateAtomDefaultsAfterDataLoaded()})),i.next=9,$(o[0]);case 9:l=i.sent.toArray(),e({min:[0,0,0],max:l}),t(Math.floor(l[a]/2)),n(Object.keys(L));case 13:case"end":return i.stop()}}),i)})))).apply(this,arguments)}function l(e){return u.apply(this,arguments)}function u(){return(u=Object(_.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(a=t.target.files)){e.next=3;break}return e.abrupt("return");case 3:return n=Array.from(a),e.next=6,o(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(i.useEffect)((function(){function e(){return(e=Object(_.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we();case 2:if(!(t=e.sent).length){e.next=6;break}return e.next=6,o(t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}ke||(!function(){e.apply(this,arguments)}(),ke=!0)})),document&&(document.getElementById("file-input").onchange=l,document.getElementById("directory-input").onchange=l),r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{className:"bp3-minimal",icon:"upload",text:"Upload Files",onClick:function(){var e=document.getElementById("file-input");if(!e)throw new Error("Missing file input element.");e.click()}}),r.a.createElement(s.a,{className:"bp3-minimal",icon:"upload",text:"Upload Directory",onClick:function(){var e=document.getElementById("directory-input");if(!e)throw new Error("Missing directory input element.");e.click()}}))}function Le(){var e=Object(m.useRecoilState)(f),t=Object(l.a)(e,2),a=t[0],n=t[1];return r.a.createElement(s.f,{className:"Nav"},r.a.createElement(s.h,{align:u.a.LEFT},r.a.createElement(s.i,null,"Unlocking History"),r.a.createElement(s.g,null),r.a.createElement(s.n,{animate:!0,large:!0,onChange:function(e){return n(e)},selectedTabId:a},r.a.createElement(s.m,{id:"3D",title:"3D"}),r.a.createElement(s.m,{disabled:!0,id:"2D",title:"2D"}))),r.a.createElement(s.f.Group,{align:u.a.RIGHT},r.a.createElement(Se,null)))}a(234);var Ne=a(246),Ge=a(23),Ce=(a(235),a(2)),Ve=a(85),Me=a.n(Ve),Ae=a(12),Xe=a.n(Ae);function Re(e){var t=e.bufferedSelection.type,a=Object(m.useRecoilState)(e.bufferedSelection.getAtom()),n=Object(l.a)(a,2),i=n[0],o=n[1],c=i.visualStyle,u=i.pointDataFilename,f=i.vectorDataFilename,d=i.vectorOffsetFilename,p=i.vectorScaleFilename,h=i.colorMode,b=i.colorHex,x=i.colorZeroCentered,_=i.colorDataFilename,v=Object(m.useRecoilValue)(Y),y=Object(m.useRecoilValue)(P);Object(m.useRecoilValue)(Z);function E(e){var t=e.target.value;"undefined"===t&&(t=void 0),o(Object(Ge.a)(Object(Ge.a)({},i),{},{pointDataFilename:t}))}function g(){o(Object(Ge.a)({},i)),e.toggleVisiblity()}var D=Xe()("FileMenu__FileName",Ce.a.MENU_ITEM,{expanded:e.isExpanded});return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:D,onClick:g},r.a.createElement("a",{href:"# ",onClick:function(t){t.stopPropagation(),e.expandFile(e.isExpanded?null:e.filename),e.isExpanded||e.isVisible||g()}},!e.isExpanded&&r.a.createElement(s.e,{icon:"caret-right"}),e.isExpanded&&r.a.createElement(s.e,{icon:"caret-down"})),r.a.createElement(Me.a,null,r.a.createElement("span",null,e.filename)),e.isVisible&&r.a.createElement(s.e,{className:Ce.a.ALIGN_RIGHT,icon:"eye-open"})),r.a.createElement(s.c,{isOpen:e.isExpanded,keepChildrenMounted:!0},r.a.createElement("div",{className:"FileMenu__FileOptions"},r.a.createElement(s.d,null,"Properties"),r.a.createElement("div",null,"Data Type: ",r.a.createElement("b",null,t)),1===e.bufferedSelection.numElements&&r.a.createElement("div",null,"Min: ",r.a.createElement("b",null,e.bufferedSelection.min.toString())),1===e.bufferedSelection.numElements&&r.a.createElement("div",null,"Max: ",r.a.createElement("b",null,e.bufferedSelection.max.toString())),r.a.createElement("br",null),"scalarField"!==c&&r.a.createElement(r.a.Fragment,null,r.a.createElement(s.d,null,"Visual Style"),r.a.createElement(s.k,{onChange:function(e){var t=e.target.value;o(Object(Ge.a)(Object(Ge.a)({},i),{},{visualStyle:t}))},selectedValue:c},r.a.createElement(s.j,{label:"Point",value:"point"}),r.a.createElement(s.j,{label:"Vector",value:"vector"}),e.bufferedSelection.numElements>3&&r.a.createElement(s.j,{label:"Mesh",value:"mesh"})),"point"===c&&r.a.createElement("div",null,r.a.createElement("label",{className:"bp3-label .modifier"},"Point Position Data",r.a.createElement("div",{className:"bp3-select .modifier"},r.a.createElement("select",{value:u,onChange:E},r.a.createElement("option",{value:"undefined"},"None"),v.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))))),"vector"===c&&r.a.createElement("div",null,r.a.createElement("label",{className:"bp3-label .modifier"},"Vector Direction",r.a.createElement("div",{className:"bp3-select .modifier"},r.a.createElement("select",{value:f,onChange:function(e){var t=e.target.value;"undefined"===t&&(t=void 0),o(Object(Ge.a)(Object(Ge.a)({},i),{},{vectorDataFilename:t}))}},r.a.createElement("option",{value:"undefined"},"None"),v.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))))),r.a.createElement("label",{className:"bp3-label .modifier"},"Vector Origin",r.a.createElement("div",{className:"bp3-select .modifier"},r.a.createElement("select",{value:d,onChange:function(e){var t=e.target.value;"undefined"===t&&(t=void 0),o(Object(Ge.a)(Object(Ge.a)({},i),{},{vectorOffsetFilename:t}))}},r.a.createElement("option",{value:"undefined"},"Use Voxel Center"),v.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))))),r.a.createElement("label",{className:"bp3-label .modifier"},"Vector Magnitude",r.a.createElement("div",{className:"bp3-select .modifier"},r.a.createElement("select",{value:p,onChange:function(e){var t=e.target.value;"undefined"===t&&(t=void 0),o(Object(Ge.a)(Object(Ge.a)({},i),{},{vectorScaleFilename:t}))}},r.a.createElement("option",{value:"undefined"},"Unit Scale"),y.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))))),"mesh"===c&&r.a.createElement("div",null,r.a.createElement("label",{className:"bp3-label .modifier"},"Vertex Data",r.a.createElement("div",{className:"bp3-select .modifier"},r.a.createElement("select",{value:u,onChange:E},r.a.createElement("option",{value:"undefined"},"None"),v.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))))),r.a.createElement("br",null)),r.a.createElement(s.d,null,"Color"),r.a.createElement(s.k,{onChange:function(e){var t=e.target.value;o(Object(Ge.a)(Object(Ge.a)({},i),{},{colorMode:t}))},selectedValue:h},"scalarField"!==c&&r.a.createElement(s.j,{label:"Hex",value:"hex"}),r.a.createElement(s.j,{label:"Spectrum",value:"spectral"}),r.a.createElement(s.j,{label:"Greyscale",value:"greyscale"}),"scalarField"!==c&&"hex"===h&&r.a.createElement("div",null,r.a.createElement("label",{className:"bp3-label .modifier"},"Hex Color",r.a.createElement("div",null,r.a.createElement("input",{onKeyUp:function(e){var t=e.target.value;o(Object(Ge.a)(Object(Ge.a)({},i),{},{colorHex:t}))},defaultValue:b})))),"hex"!==h&&r.a.createElement("div",null,"scalarField"!==c&&r.a.createElement("label",{className:"bp3-label .modifier"},"Data",r.a.createElement("div",{className:"bp3-select .modifier"},r.a.createElement("select",{value:_,onChange:function(e){var t=e.target.value;o(Object(Ge.a)(Object(Ge.a)({},i),{},{colorDataFilename:t}))}},r.a.createElement("option",{value:"undefined"},"None"),y.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))))),r.a.createElement(s.b,{checked:x,label:"Center colormap around 0",onChange:function(e){var t=e.target.checked;o(Object(Ge.a)(Object(Ge.a)({},i),{},{colorZeroCentered:t}))}}))))))}function Ue(e){var t=Object(i.useState)(!1),a=Object(l.a)(t,2),n=a[0],o=a[1],c=Object(i.useState)(null),u=Object(l.a)(c,2),m=u[0],f=u[1];function d(e){f(e)}return r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"# ",onClick:function(){0!==e.filenames.length&&o(!n)}},r.a.createElement("li",{className:"".concat(Ce.a.MENU_ITEM," FileMenu__Title ").concat(0===e.filenames.length?Ce.a.DISABLED:"")},e.title," (",e.filenames.length,")",!n&&r.a.createElement(s.e,{icon:"caret-right"}),n&&r.a.createElement(s.e,{icon:"caret-down"}))),r.a.createElement(s.c,{isOpen:n,keepChildrenMounted:!0},e.filenames.map((function(t){var a=e.visibleFilenames.indexOf(t)>-1;return r.a.createElement(Re,{key:t,filename:t,bufferedSelection:L[t],isExpanded:t===m,expandFile:d,isVisible:a,toggleVisiblity:function(){return e.toggleVisiblity(t,a)}})}))))}function Ze(){var e=Object(m.useRecoilValue)(Z),t=Object(m.useRecoilState)(d),a=Object(l.a)(t,2),n=a[0],i=a[1];return r.a.createElement(Ue,{filenames:e,visibleFilenames:n?[n]:[],title:"Scalar Fields",toggleVisiblity:function(e,t){i(t?null:e)}})}function Te(){var e=Object(m.useRecoilValue)(T),t=Object(m.useRecoilState)(p),a=Object(l.a)(t,2),n=a[0],i=a[1];return r.a.createElement(Ue,{filenames:e,visibleFilenames:n,title:"Vector Fields",toggleVisiblity:function(e,t){var a=n.slice();t?a.splice(a.indexOf(e),1):a.push(e),i(a)}})}function Ye(){var e=Object(m.useRecoilValue)(U),t=Object(m.useRecoilState)(h),a=Object(l.a)(t,2),n=a[0],i=a[1];return r.a.createElement(Ue,{filenames:e,visibleFilenames:n,title:"Other Data",toggleVisiblity:function(e,t){var a=n.slice();t?a.splice(a.indexOf(e),1):a.push(e),i(a)}})}function Pe(){return r.a.createElement("ul",{className:"FileMenu pt-list-unstyled ".concat(Ce.a.ELEVATION_0)},r.a.createElement(Ze,null),r.a.createElement(Te,null),r.a.createElement(Ye,null))}a(236);var ze=a(26),Ie=a(24),He=new z.BufferAttribute(new Float32Array([-.5,-.5,.5,.5,-.5,.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5]),3),We=new z.BufferAttribute(new Float32Array([0,0,1,0,0,1,1,1,0,0,1,0,0,1,1,1]),2),Je=new z.BufferAttribute(new Uint32Array([0,1,2,2,1,3,4,6,5,5,6,7,0,4,1,1,4,5,1,5,3,3,5,7,3,7,2,2,7,6,2,6,0,0,6,4]),1);function Ke(){var e=Object(m.useRecoilValue)(E);console.log(e);var t=Object(m.useRecoilValue)(O),a=Object(m.useRecoilValue)(j),n=Object(m.useRecoilValue)(g),i=Object(m.useRecoilValue)(D),o=Object(m.useRecoilValue)(d),c=L[o],l=Object(m.useRecoilValue)(c.getAtom()),s=null;c&&(s=c.getLayerTexture(i,n,l));var u=Object(ze.d)((function(e){s&&(e.image.data=s,e.needsUpdate=!0)}),[].concat(Object(Ie.a)(Object.values(l)),[n,i,s]));return r.a.createElement("mesh",{renderOrder:-1,position:[a[0],a[1],e[2]+.5],scale:t},r.a.createElement("bufferGeometry",{attach:"geometry","attributes-position":He,"attributes-uv":We,index:Je}),r.a.createElement("meshBasicMaterial",{depthWrite:!1,attach:"material"},r.a.createElement("dataTexture",{ref:u,attach:"map","image-width":t[0],"image-height":t[1],format:z.RGBFormat,type:z.UnsignedByteType})))}function $e(){return null===Object(m.useRecoilValue)(d)?null:r.a.createElement(Ke,null)}var qe=a(90),Qe={controls:void 0};function et(e){var t=Object(m.useRecoilValue)(E),a=Object(ze.c)(),n=a.camera,o=a.gl.domElement,c=a.invalidate,l=Object(ze.d)((function(e){e.update()}),[t]);return Object(i.useEffect)((function(){if(l&&null!==l.current){Qe.controls=l.current,l.current.addEventListener("change",c);return function(){return l.current.removeEventListener("change",c)}}return function(){return null}}),[l,c]),r.a.createElement("orbitControls",{ref:l,args:[n,o],"target-x":t[0],"target-y":t[1],"target-z":t[2],zoomSpeed:1,rotateSpeed:1})}function tt(e){var t=Object(m.useRecoilValue)(g),a=Object(m.useRecoilValue)(D),n=Object(m.useRecoilValue)(e.bufferedTomSelection.getAtom()),i=Object(m.useRecoilValue)(j),o=Object(m.useRecoilValue)(E),c=e.bufferedTomSelection.getLayerPositions(a,t,n),l=c.positions,s=c.count,u=c.vertexColors,f=n.visualStyle,d=Object(ze.d)((function(e){e.needsUpdate=!0}),[].concat(Object(Ie.a)(Object.values(n)),[t,a,l])),p=Object(ze.d)((function(e){e.needsUpdate=!0}),[].concat(Object(Ie.a)(Object.values(n)),[t,a,u]));return r.a.createElement(r.a.Fragment,null,"vector"===f&&r.a.createElement("lineSegments",{position:[0,0,-i[2]+o[2]]},r.a.createElement("bufferGeometry",{attach:"geometry"},r.a.createElement("bufferAttribute",{ref:d,attachObject:["attributes","position"],array:l,count:s,itemSize:3}),r.a.createElement("bufferAttribute",{ref:p,attachObject:["attributes","color"],array:u,count:s,itemSize:3})),r.a.createElement("lineBasicMaterial",{attach:"material",vertexColors:!0,depthTest:!1})),"point"===f&&r.a.createElement("points",{position:[0,0,-i[2]+o[2]]},r.a.createElement("bufferGeometry",{attach:"geometry"},r.a.createElement("bufferAttribute",{ref:d,attachObject:["attributes","position"],array:l,count:s,itemSize:3}),r.a.createElement("bufferAttribute",{ref:p,attachObject:["attributes","color"],array:u,count:s,itemSize:3})),r.a.createElement("pointsMaterial",{size:4,attach:"material",vertexColors:!0,depthTest:!1})))}function at(){var e=Object(m.useRecoilValue)(p);return r.a.createElement(r.a.Fragment,null,e.map((function(e){return r.a.createElement(tt,{key:e,bufferedTomSelection:L[e]})})))}function nt(e){var t=Object(m.useRecoilValue)(e.bufferedBinSelection.getAtom()),a=e.bufferedBinSelection.getLayerPositions(t),n=a.positions,i=a.count,o=a.edges,c=a.edgeCount,l=a.vertexColors,s=t.visualStyle,u=Object(ze.d)((function(e){e.needsUpdate=!0}),[].concat(Object(Ie.a)(Object.values(t)),[n])),f=Object(ze.d)((function(e){e.needsUpdate=!0}),[].concat(Object(Ie.a)(Object.values(t)),[o])),d=Object(ze.d)((function(e){e.needsUpdate=!0}),[].concat(Object(Ie.a)(Object.values(t)),[l]));return r.a.createElement(r.a.Fragment,null,("vector"===s||"mesh"===s)&&r.a.createElement("lineSegments",null,r.a.createElement("bufferGeometry",{attach:"geometry"},r.a.createElement("bufferAttribute",{ref:u,attachObject:["attributes","position"],array:n,count:i,itemSize:3}),"mesh"===s&&r.a.createElement("bufferAttribute",{ref:f,attach:"index",array:o,count:c,itemSize:1}),r.a.createElement("bufferAttribute",{ref:d,attachObject:["attributes","color"],array:l,count:i,itemSize:3})),r.a.createElement("lineBasicMaterial",{attach:"material",vertexColors:!0})),"point"===s&&r.a.createElement("points",null,r.a.createElement("bufferGeometry",{attach:"geometry"},r.a.createElement("bufferAttribute",{ref:u,attachObject:["attributes","position"],array:n,count:i,itemSize:3}),r.a.createElement("bufferAttribute",{ref:d,attachObject:["attributes","color"],array:l,count:i,itemSize:3})),r.a.createElement("pointsMaterial",{size:4,attach:"material",vertexColors:!0})))}function it(){var e=Object(m.useRecoilValue)(h);return r.a.createElement(r.a.Fragment,null,e.map((function(e){return r.a.createElement(nt,{key:e,bufferedBinSelection:L[e]})})))}Object(ze.b)({OrbitControls:qe.a});var rt=function(){var e=Object(i.useContext)(m.AppContext);return r.a.createElement("div",{className:"View3D"},r.a.createElement(ze.a,{colorManagement:!0,orthographic:!0,camera:{zoom:5,up:[0,0,1],near:1e-4,far:1e4,position:[100,100,100]},pixelRatio:window.devicePixelRatio,invalidateFrameloop:!0},r.a.createElement(m.AppContext.Provider,{value:e},r.a.createElement("ambientLight",null),r.a.createElement("pointLight",{position:[10,10,10]}),r.a.createElement($e,null),r.a.createElement(at,null),r.a.createElement(it,null),r.a.createElement(et,null))))};a(240);function ot(){var e=Object(m.useRecoilState)(g),t=Object(l.a)(e,2),a=t[0],n=t[1],i=Object(m.useRecoilValue)(D),o=Object(m.useRecoilValue)(v),c=Object(m.useRecoilValue)(y);return r.a.createElement("div",{className:"ControlPanel"},c[i]>0&&r.a.createElement(s.l,{min:o.min[i],max:o.max[i]-1,stepSize:1,labelStepSize:10,onChange:n,value:a,vertical:!0,showTrackFill:!1}))}a(241);function ct(){return r.a.createElement("div",{className:"OrbitControls"},r.a.createElement(s.a,{className:"bp3-minimal",text:"Reset 3D View",onClick:function(){var e;null===(e=Qe.controls)||void 0===e||e.reset()}}))}Ne.a.onlyShowFocusOnTabs();var lt=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(m.RecoilRoot,null,r.a.createElement(Le,null),r.a.createElement("div",{className:"App__Content"},r.a.createElement(Pe,null),r.a.createElement(rt,null),r.a.createElement(ot,null),r.a.createElement(ct,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(lt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}]),[[133,1,2]]]);
//# sourceMappingURL=main.e45748de.chunk.js.map